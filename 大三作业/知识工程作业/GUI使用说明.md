# 图形界面使用说明

## 🎨 界面介绍

本系统提供了现代化的PyQt5图形界面，包含以下功能：

### 主要功能

1. **智能问答对话**
   - 左侧显示问题提示，点击即可快速输入
   - 右侧为聊天界面，支持实时问答
   - 消息以气泡形式显示，美观易读

2. **问题提示面板**
   - 显示11种常见问题类型示例
   - 点击问题可直接填入输入框
   - 帮助用户了解系统能力

3. **知识图谱可视化**
   - 点击"关于"按钮查看知识图谱
   - 可视化展示疾病、症状、药品等实体关系
   - 支持刷新图谱数据

## 🚀 启动方式

### 方法一：直接运行GUI程序

在命令行中进入项目目录，运行：

```powershell
python gui_chatbot.py
```

### 方法二：从命令行启动

```powershell
cd "E:\学委\作业\大三上\知识工程\第五章：基于知识图谱的医药问答系统实战\QAMedicalKG"
python gui_chatbot.py
```

## 📦 安装依赖

首次使用前，需要安装GUI相关依赖：

```powershell
pip install PyQt5 matplotlib networkx
```

或者安装所有依赖：

```powershell
pip install -r requirements.txt
```

## 🎯 使用步骤

### 1. 确保Neo4j数据库已启动

- 打开Neo4j Desktop
- 启动数据库服务
- 确保端口7687可用

### 2. 确保知识图谱已构建

如果还没有构建知识图谱，请先运行：

```powershell
python build_medicalgraph.py
```

### 2.5. 导入增强数据（可选但推荐）

如需使用新功能（药物禁忌、不良反应等），请先导入增强数据：

```powershell
python import_enhanced_data.py
```

这会从补充资料中导入禁忌关系、不良反应、注意事项等数据。

### 3. 启动GUI程序

```powershell
python gui_chatbot.py
```

### 4. 开始使用

- **提问方式1**：在左侧问题提示面板点击问题示例
- **提问方式2**：在底部输入框直接输入问题，按回车或点击"发送"
- **查看图谱**：点击顶部"关于"按钮查看知识图谱可视化

## 💡 问题类型示例

系统支持以下类型的问题：

### 基础问题类型

1. **疾病症状**：感冒的症状是什么？
2. **症状疾病**：发烧可能是什么病？
3. **疾病原因**：感冒的原因是什么？
4. **疾病预防**：如何预防感冒？
5. **疾病治疗**：感冒怎么治疗？
6. **疾病药品**：感冒用什么药？
7. **疾病食物**：感冒吃什么食物？
8. **疾病检查**：感冒需要做什么检查？
9. **疾病科室**：感冒应该挂什么科？
10. **症状预防**：如何预防发烧？
11. **症状用药**：发烧用什么药？

### 新增问题类型（需要导入增强数据）

12. **药物禁忌**：阿司匹林有什么禁忌？、布洛芬不能和什么一起吃？
13. **不良反应**：布洛芬有什么不良反应？、阿司匹林有什么副作用？
14. **注意事项**：阿司匹林有什么注意事项？
15. **特殊人群用药**：阿司匹林儿童能用吗？、布洛芬孕妇能用吗？
16. **药物成份**：阿司匹林含有什么成份？、布洛芬有什么成分？
17. **症状导致疾病**：发烧会导致什么疾病？、咳嗽会引起什么病？
18. **科室查询**：心内科看什么病？、内科有什么疾病？
19. **部位查询**：头部容易得什么病？、胸部有什么疾病？

## 🎨 界面特点

- **现代化设计**：采用类似微信/iMessage的聊天界面风格
- **响应式布局**：支持窗口大小调整
- **流畅交互**：后台线程处理问答，界面不卡顿
- **美观配色**：蓝色主题，清晰易读
- **智能提示**：左侧问题提示帮助快速上手

## ⚠️ 注意事项

1. **首次启动**：如果提示连接Neo4j失败，请检查：
   - Neo4j服务是否已启动
   - 用户名密码是否正确（默认：neo4j/tangyudiadid0）
   - 端口是否正确（默认：7687）

2. **知识图谱可视化**：
   - 首次加载可能需要几秒钟
   - 如果节点过多，可能只显示部分标签
   - 可以点击"刷新图谱"重新加载

3. **性能优化**：
   - 可视化默认只加载200条关系，避免界面卡顿
   - 如需查看完整图谱，可在Neo4j浏览器中查看

## 🔧 故障排除

### 问题1：无法启动GUI

**解决方案**：
- 检查是否安装了PyQt5：`pip install PyQt5`
- 检查Python版本（需要3.6+）

### 问题2：界面显示异常

**解决方案**：
- 尝试更新PyQt5：`pip install --upgrade PyQt5`
- 检查系统字体设置

### 问题3：知识图谱无法显示

**解决方案**：
- 检查Neo4j连接
- 确认知识图谱已构建
- 查看控制台错误信息

## 📝 更新日志

- **v1.0**：初始版本，包含基本问答和可视化功能


