<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文字构建师 - 组合文字构建意义</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 动态背景 -->
    <div class="bg-animation"></div>
    
    <!-- 开始界面 -->
    <div id="startScreen" class="screen active">
        <div class="glass-container">
            <div class="logo-section">
                <div class="logo-icon">✨</div>
                <h1 class="title">文字构建师</h1>
                <p class="subtitle">通过组合文字，构建属于你的意义世界</p>
            </div>
            
            <div class="api-config">
                <div class="config-section">
                    <label class="section-label">API 服务</label>
                    <div class="api-selector">
                        <button class="api-option active" data-api="deepseek">
                            <span class="api-icon">🚀</span>
                            <span>DeepSeek</span>
                        </button>
                        <button class="api-option" data-api="dashscope">
                            <span class="api-icon">☁️</span>
                            <span>阿里百炼</span>
                        </button>
                    </div>
                </div>
                
                <div class="config-section">
                    <label class="section-label">API Key</label>
                    <div class="input-wrapper">
                        <input type="password" id="apiKey" placeholder="sk-..." class="glass-input">
                        <button class="toggle-visibility" id="toggleKey">👁️</button>
                    </div>
                </div>
                
                <div class="config-section">
                    <label class="section-label">API URL <span class="optional">(可选)</span></label>
                    <input type="text" id="apiUrl" placeholder="自动填充默认地址" class="glass-input">
                </div>
                
                <div class="quick-start-section">
                    <label class="section-label">快速开始</label>
                    <div class="quick-start-grid">
                        <button class="quick-start-btn" data-preset="fantasy">
                            <span class="preset-icon">🧙</span>
                            <span class="preset-name">奇幻冒险</span>
                            <span class="preset-desc">魔法、巨龙、勇士</span>
                        </button>
                        <button class="quick-start-btn" data-preset="sci-fi">
                            <span class="preset-icon">🚀</span>
                            <span class="preset-name">科幻未来</span>
                            <span class="preset-desc">太空、AI、未来</span>
                        </button>
                        <button class="quick-start-btn" data-preset="romance">
                            <span class="preset-icon">💕</span>
                            <span class="preset-name">浪漫爱情</span>
                            <span class="preset-desc">相遇、心动、永恒</span>
                        </button>
                        <button class="quick-start-btn" data-preset="mystery">
                            <span class="preset-icon">🔍</span>
                            <span class="preset-name">悬疑推理</span>
                            <span class="preset-desc">谜题、线索、真相</span>
                        </button>
                    </div>
                </div>
                
                <button id="startBtn" class="primary-btn">
                    <span>开始创作</span>
                    <span class="btn-arrow">→</span>
                </button>
            </div>
        </div>
    </div>

    <!-- 游戏主界面 -->
    <div id="gameScreen" class="screen">
        <div class="game-layout">
            <!-- 侧边栏 -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h2>文字构建师</h2>
                    <button id="backBtn" class="icon-btn" title="返回设置">⚙️</button>
                </div>
                
                <div class="sidebar-section">
                    <h3>创作设置</h3>
                    <div class="setting-group">
                        <label>故事类型</label>
                        <select id="storyType" class="glass-select">
                            <option value="general">通用</option>
                            <option value="fantasy">奇幻</option>
                            <option value="sci-fi">科幻</option>
                            <option value="romance">爱情</option>
                            <option value="mystery">悬疑</option>
                            <option value="comedy">喜剧</option>
                            <option value="drama">剧情</option>
                        </select>
                    </div>
                    
                    <div class="setting-group">
                        <label>故事长度</label>
                        <div class="slider-container">
                            <input type="range" id="storyLength" min="200" max="800" value="500" class="slider">
                            <span id="lengthValue" class="slider-value">500字</span>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <label>创作风格</label>
                        <select id="storyStyle" class="glass-select">
                            <option value="creative">创意</option>
                            <option value="detailed">详细</option>
                            <option value="concise">简洁</option>
                            <option value="poetic">诗意</option>
                        </select>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3>历史记录</h3>
                    <div id="historyList" class="history-list">
                        <div class="empty-history">暂无历史记录</div>
                    </div>
                </div>
            </aside>

            <!-- 主内容区 -->
            <main class="main-content">
                <!-- 输入区域 -->
                <section class="input-panel glass-panel">
                    <div class="panel-header">
                        <h2>输入关键词</h2>
                        <div class="word-count">
                            <span id="wordCount">0</span> 个词语
                        </div>
                    </div>
                    
                    <div class="input-area">
                        <div id="wordTags" class="tags-container"></div>
                        <div class="input-wrapper-large">
                            <input type="text" id="wordInput" placeholder="输入词语，用空格或逗号分隔，按回车添加" class="large-input">
                            <button id="addWordBtn" class="add-btn">+</button>
                        </div>
                    </div>
                    
                    <div class="suggestions">
                        <div class="suggestions-header">
                            <span>💡 推荐词语</span>
                        </div>
                        <div id="suggestions" class="suggestion-tags"></div>
                    </div>
                    
                    <div class="action-buttons">
                        <button id="generateBtn" class="primary-btn large">
                            <span class="btn-icon">✨</span>
                            <span>生成故事</span>
                        </button>
                        <button id="clearBtn" class="secondary-btn">清空</button>
                    </div>
                </section>

                <!-- 输出区域 -->
                <section class="output-panel glass-panel">
                    <div class="panel-header">
                        <h2>生成的故事</h2>
                        <div class="story-meta" id="storyMeta"></div>
                    </div>
                    
                    <div id="storyContainer" class="story-container">
                        <div class="empty-state">
                            <div class="empty-icon">📖</div>
                            <p>输入关键词后，点击"生成故事"</p>
                            <p class="empty-hint">AI将根据您输入的词语组合，构建一个完整的故事</p>
                        </div>
                    </div>
                    
                    <div class="story-actions" id="storyActions" style="display: none;">
                        <button id="regenerateBtn" class="primary-btn">
                            <span class="btn-icon">🔄</span>
                            <span>重新生成</span>
                        </button>
                        <button id="saveBtn" class="secondary-btn">
                            <span class="btn-icon">💾</span>
                            <span>保存</span>
                        </button>
                        <button id="shareBtn" class="secondary-btn">
                            <span class="btn-icon">📤</span>
                            <span>分享</span>
                        </button>
                        <button id="rateBtn" class="secondary-btn">
                            <span class="btn-icon">⭐</span>
                            <span>评分</span>
                        </button>
                    </div>
                </section>
            </main>
        </div>

        <!-- 加载提示 -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p class="loading-text">AI正在思考中...</p>
                <div class="loading-dots">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- 评分弹窗 -->
    <div id="rateModal" class="modal hidden">
        <div class="modal-content glass-panel">
            <h3>为这个故事评分</h3>
            <div class="rating-stars">
                <button class="star" data-rating="1">⭐</button>
                <button class="star" data-rating="2">⭐</button>
                <button class="star" data-rating="3">⭐</button>
                <button class="star" data-rating="4">⭐</button>
                <button class="star" data-rating="5">⭐</button>
            </div>
            <div class="modal-actions">
                <button id="submitRating" class="primary-btn">提交</button>
                <button id="cancelRating" class="secondary-btn">取消</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
